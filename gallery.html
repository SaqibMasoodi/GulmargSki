<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Journey | Wolf Adventure</title>
    <meta name="description"
        content="Explore Gulmarg's breathtaking peaks and powder through our curated visual gallery.">
    <link rel="icon" type="image/png" href="/wolf.png">

    <!-- Open Graph / Social -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Visual Journey | Wolf Adventure">
    <meta property="og:description" content="A stunning collection of Gulmarg's best moments.">
    <meta property="og:image" content="assets/images/logo.webp">

    <!-- Main Stylesheet (Loaded before JS to prevent FOUC) -->
    <link rel="stylesheet" href="/assets/css/styles.css">

    <!-- Core Application -->
    <script type="module" src="/assets/js/script.js"></script>
</head>

<body class="bg-alpine-off text-alpine-text antialiased selection:bg-alpine-blue selection:text-white font-sans"
    x-data="galleryApp()">

    <!-- Navigation (Consistent with other pages) -->
    <div id="header-placeholder"></div>

    <!-- Hero Section -->

    <header class="relative h-[70vh] w-full overflow-hidden flex items-center justify-center bg-slate-900">
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1596484552834-6a58f850e0a1?q=80&w=2070&auto=format&fit=crop"
                class="w-full h-full object-cover" alt="Gulmarg Peaks">
            <div class="absolute inset-0 z-10 bg-gradient-to-r from-slate-900/90 via-slate-900/60 to-slate-900/30">
            </div>
            <div class="absolute inset-0 z-10 bg-gradient-to-t from-slate-900 via-transparent to-transparent"></div>
        </div>

        <div class="relative z-20 w-full max-w-4xl px-6 text-center pt-24">
            <div class="fade-in-up">
                <div class="flex items-center justify-center gap-3 mb-6">
                    <span
                        class="inline-flex items-center justify-center w-2 h-2 rounded-full bg-cyan-400 shadow-[0_0_10px_rgba(34,211,238,0.8)]"></span>
                    <span class="text-cyan-400 text-[10px] font-bold uppercase tracking-[0.2em] font-mono">Captured in
                        8K</span>
                </div>
                <h1
                    class="text-5xl md:text-7xl lg:text-8xl font-black tracking-tighter leading-[0.85] text-white mb-6 drop-shadow-2xl">
                    FROZEN <br>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-300 to-white">MOMENTS</span>
                </h1>
                <p
                    class="text-slate-300 text-lg md:text-xl font-medium max-w-2xl mx-auto leading-relaxed drop-shadow-md">
                    A curated collection of peaks, powder, and pure adrenaline from the slopes of Gulmarg.
                </p>
            </div>
        </div>
    </header>


    <!-- Gallery Section -->
    <main class="max-w-[1600px] mx-auto px-4 sm:px-6 py-12">

        <!-- Category Filter -->
        <div class="flex justify-center mb-12 overflow-x-auto no-scrollbar py-2">
            <div class="flex gap-2 bg-white p-1.5 rounded-full border border-slate-200 shadow-sm">
                <template x-for="cat in categories" :key="cat.id">
                    <button @click="activeCategory = cat.id"
                        :class="activeCategory === cat.id ? 'bg-alpine-deep text-white shadow-md' : 'text-slate-500 hover:bg-slate-50 hover:text-slate-900'"
                        class="px-6 py-2.5 rounded-full text-sm font-bold transition-all duration-300 whitespace-nowrap"
                        x-text="cat.name">
                    </button>
                </template>
            </div>
        </div>

        <!-- Masonry Grid -->
        <div class="masonry-grid" id="gallery-grid">
            <template x-for="(item, index) in filteredItems" :key="item.id">
                <div class="gallery-item group relative overflow-hidden rounded-2xl cursor-zoom-in break-inside-avoid"
                    @click="openLightbox(index)">
                    <!-- Media -->
                    <template x-if="item.type === 'video'">
                        <div class="relative w-full aspect-video md:aspect-auto">
                            <video :src="item.src" class="w-full h-auto object-cover" muted loop playsinline></video>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <div
                                    class="w-16 h-16 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center border border-white/30 group-hover:scale-110 transition-transform duration-300">
                                    <span
                                        class="material-symbols-rounded text-white text-4xl leading-none ml-1">play_arrow</span>
                                </div>
                            </div>
                        </div>
                    </template>
                    <template x-if="!item.type || item.type === 'image'">
                        <img :src="item.src" :alt="item.title" loading="lazy"
                            class="w-full h-auto object-cover transform transition-transform duration-700 group-hover:scale-110">
                    </template>

                    <!-- Overlay -->
                    <div
                        class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-6">
                        <span class="text-xs font-bold text-sky-400 uppercase tracking-wider mb-1"
                            x-text="item.category"></span>
                        <h3 class="text-white font-bold text-lg leading-tight" x-text="item.title"></h3>
                    </div>
                </div>
            </template>
        </div>

    </main>

    <!-- Lightbox Modal -->
    <div x-show="lightboxOpen" x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
        x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
        class="fixed inset-0 z-[100] bg-black/95 backdrop-blur-xl flex items-center justify-center"
        @keydown.escape.window="closeLightbox()" x-cloak>
        <!-- Close Button -->
        <button @click="closeLightbox()"
            class="absolute top-6 right-6 lg:top-10 lg:right-10 text-white/50 hover:text-white p-2 transition-colors z-50">
            <span class="material-symbols-rounded text-4xl">close</span>
        </button>

        <!-- Nav Buttons -->
        <button @click="prevImage()"
            class="absolute left-4 lg:left-10 text-white/50 hover:text-white p-4 transition-colors z-50 focus:outline-none">
            <span class="material-symbols-rounded text-5xl">chevron_left</span>
        </button>
        <button @click="nextImage()"
            class="absolute right-4 lg:right-10 text-white/50 hover:text-white p-4 transition-colors z-50 focus:outline-none">
            <span class="material-symbols-rounded text-5xl">chevron_right</span>
        </button>

        <!-- Main Image Container -->
        <div class="relative max-w-7xl max-h-[90vh] w-full px-4 flex flex-col items-center">

            <!-- Close Button (Top Left on Mobile) -->
            <button @click="closeLightbox()" class="md:hidden absolute -top-12 right-0 text-white">
                <span class="material-symbols-rounded">close</span>
            </button>

            <!-- Media Content -->
            <template x-if="filteredItems[currentIndex]?.type === 'video'">
                <div class="relative w-full max-h-[70vh] flex flex-col items-center">
                    <video x-ref="lightboxVideo" :src="filteredItems[currentIndex].src"
                        class="max-w-full max-h-[70vh] object-contain rounded-lg shadow-2xl" @click.stop="togglePlay()"
                        playsinline></video>

                    <!-- Video Controls Overlay -->
                    <div class="absolute bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-6 bg-black/40 backdrop-blur-md px-6 py-3 rounded-full border border-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-auto"
                        :class="lightboxOpen ? 'opacity-100' : ''">
                        <button @click.stop="togglePlay()" class="text-white hover:text-sky-400 transition-colors">
                            <span class="material-symbols-rounded text-3xl"
                                x-text="isPlaying ? 'pause' : 'play_arrow'"></span>
                        </button>
                        <button @click.stop="toggleMute()" class="text-white hover:text-sky-400 transition-colors">
                            <span class="material-symbols-rounded text-3xl"
                                x-text="isMuted ? 'volume_off' : 'volume_up'"></span>
                        </button>
                    </div>
                </div>
            </template>
            <template x-if="!filteredItems[currentIndex]?.type || filteredItems[currentIndex]?.type === 'image'">
                <img :src="filteredItems[currentIndex]?.src"
                    class="max-w-full max-h-[80vh] object-contain rounded shadow-2xl animate-fade-up"
                    :key="currentIndex">
            </template>

            <!-- Caption -->
            <div class="mt-6 text-center max-w-2xl">
                <h2 class="text-2xl font-bold text-white mb-2" x-text="filteredItems[currentIndex]?.title"></h2>
                <p class="text-slate-400 text-sm" x-text="filteredItems[currentIndex]?.desc"></p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer-placeholder"></div>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('galleryApp', () => ({
                activeCategory: 'all',
                lightboxOpen: false,
                currentIndex: 0,
                isPlaying: false,
                isMuted: false,

                categories: [
                    { id: 'all', name: 'All Moments' },
                    { id: 'ski', name: 'Ski Action' },
                    { id: 'landscape', name: 'Landscapes' },
                    { id: 'life', name: 'Resort Life' },
                    { id: 'heli', name: 'Heli-Skiing' }
                ],

                items: galleryItems,
                get filteredItems() {
                    if (this.activeCategory === 'all') return this.items;
                    return this.items.filter(item => item.category === this.activeCategory);
                },

                openLightbox(index) {
                    this.currentIndex = index;
                    this.lightboxOpen = true;
                    this.isPlaying = false;
                    this.isMuted = false;
                    document.body.style.overflow = 'hidden';

                    // Auto-play if item is video
                    this.$nextTick(() => {
                        const video = this.$refs.lightboxVideo;
                        if (this.filteredItems[this.currentIndex]?.type === 'video' && video) {
                            video.play().then(() => {
                                this.isPlaying = true;
                            }).catch(e => console.log('Video play blocked'));
                        }
                    });
                },

                closeLightbox() {
                    if (this.$refs.lightboxVideo) this.$refs.lightboxVideo.pause();
                    this.lightboxOpen = false;
                    this.isPlaying = false;
                    document.body.style.overflow = 'auto';
                },

                togglePlay() {
                    const video = this.$refs.lightboxVideo;
                    if (video) {
                        if (video.paused) {
                            video.play();
                            this.isPlaying = true;
                        } else {
                            video.pause();
                            this.isPlaying = false;
                        }
                    }
                },

                toggleMute() {
                    const video = this.$refs.lightboxVideo;
                    if (video) {
                        video.muted = !video.muted;
                        this.isMuted = video.muted;
                    }
                },

                nextImage() {
                    this.currentIndex = (this.currentIndex + 1) % this.filteredItems.length;
                    this.resetVideoState();
                },

                prevImage() {
                    this.currentIndex = (this.currentIndex - 1 + this.filteredItems.length) % this.filteredItems.length;
                    this.resetVideoState();
                },

                resetVideoState() {
                    this.isPlaying = false;
                    this.$nextTick(() => {
                        const video = this.$refs.lightboxVideo;
                        if (this.filteredItems[this.currentIndex]?.type === 'video' && video) {
                            video.currentTime = 0;
                            video.play().then(() => {
                                this.isPlaying = true;
                            });
                        }
                    });
                }
            }))
        })
    </script>
    <div id="fab-placeholder"></div>

</body>

</html>